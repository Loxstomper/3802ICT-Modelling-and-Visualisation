!function s(r,a,l){function u(o,t){if(!a[o]){if(!r[o]){var e="function"==typeof require&&require;if(!t&&e)return e(o,!0);if(h)return h(o,!0);var i=new Error("Cannot find module '"+o+"'");throw i.code="MODULE_NOT_FOUND",i}var n=a[o]={exports:{}};r[o][0].call(n.exports,function(t){return u(r[o][1][t]||t)},n,n.exports,s,r,a,l)}return a[o].exports}for(var h="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,o,e){"use strict";var i,n=this&&this.__extends||(i=function(t,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)});e.__esModule=!0;var s,r=t("./Colour"),a=t("./Polygon"),l=t("./Utils"),u=(s=a.Polygon,n(h,s),h.generatePoints=function(t){for(var o=[],e=2*Math.PI/h.nPoints,i=0,n=0;n<h.nPoints;n++){var s=l.Utils.randomInt(h.maxRadius-h.minRadius+1)+h.minRadius;o.push({x:t.x+s*Math.cos(i),y:t.y+s*Math.sin(i)}),i+=e}return o},h.prototype.update=function(t){(this.centrePoint.x+h.maxRadius>=this.resolution.x||this.centrePoint.x-h.maxRadius<=0)&&(this.velocity.x*=-1),(this.centrePoint.y+h.maxRadius>=this.resolution.y||this.centrePoint.y-h.maxRadius<=0)&&(this.velocity.y*=-1),this.rotate(this.rotationSpeed*t),this.translate(this.velocity.x*t,this.velocity.y*t)},h.prototype.bounce=function(){this.velocity.x*=-1,this.velocity.y*=-1,this.translate(1.5*this.velocity.x,1.5*this.velocity.y)},h.prototype.handleCollision=function(t,o){for(var e=this.boundingBox.points,i=e[2].x-e[0].x,n=e[3].y-e[0].y,s=[],r=0;r<t.length;r++)if(r!==o){var a=t[r].boundingBox.points,l=a[2].x-e[0].x,u=a[3].y-e[0].y;e[0].x+i<a[0].x||a[0].x+l<e[0].x||e[0].y+n<a[0].y||a[0].y+u<e[0].y||s.push(r)}return s},h.minRadius=30,h.maxRadius=40,h.nPoints=24,h.maxVelocity=50,h.colours=[r.Colours.brown1,r.Colours.brown2,r.Colours.brown3],h);function h(t,o){var e=s.call(this,h.generatePoints(t),!0)||this;e.velocity={x:0,y:0},e.resolution=o,e.rotationSpeed=10+l.Utils.randomInt(90)-50,e.velocity.x=l.Utils.randomInt(h.maxVelocity)-h.maxVelocity/2,e.velocity.y=l.Utils.randomInt(h.maxVelocity)-h.maxVelocity/2;var i=h.colours[l.Utils.randomInt(h.colours.length)];return e.colour=i,e.fillColour=i,e.boundingBox.colour=r.Colours.green,e}e.Asteroid=u,e.asteroidFactory=function(t){var o=50+l.Utils.randomInt(t.x-100),e=50+l.Utils.randomInt(t.y-50);return new u({x:o,y:e},t)}},{"./Colour":2,"./Polygon":9,"./Utils":12}],2:[function(t,o,e){"use strict";e.__esModule=!0;var i=(n.prototype.toString=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},n);function n(t,o,e,i){this.r=t,this.g=o,this.b=e,this.a=i}e.Colour=i,e.Colours={black:new i(0,0,0,100),blue:new i(0,0,255,100),brown1:new i(135,54,0,100),brown2:new i(110,44,0,100),brown3:new i(93,64,55,100),green:new i(0,255,0,100),orange:new i(243,156,18,100),red:new i(255,0,0,100),silver:new i(192,192,192,100),white:new i(255,255,255,100)}},{}],3:[function(t,o,e){"use strict";e.__esModule=!0;function i(){this.scale=1,this.angle=0}e.Drawable=i},{}],4:[function(t,o,e){"use strict";e.__esModule=!0},{}],5:[function(t,o,e){"use strict";e.__esModule=!0;var i=t("./Colour"),n=t("./Matrix"),d=t("./Pixel"),h=t("./Polygon"),s=(r.prototype.updateTransformationMatrix=function(){var t=this.rotationMatrix,o=this.translationMatrix,e=[[t.values[0][0],t.values[0][1],o.values[0][0]],[t.values[1][0],t.values[1][1],o.values[1][0]],[0,0,1]],i=new n.Matrix(e);return this.transformationMatrices.push(i),i},r.prototype.setRotation=function(t){var o=Math.cos(t),e=Math.sin(t);this.rotationMatrix.values=[[o,-e],[e,o]],this.updateTransformationMatrix()},r.prototype.setTranslation=function(t,o){this.translationMatrix.values=[[t],[o]],this.updateTransformationMatrix()},r.prototype.drawLine=function(t,o,e){var i=t,n=o,s=Math.ceil(n.x-i.x),r=Math.ceil(n.y-i.y),a=Math.abs(s)>Math.abs(r)?Math.ceil(Math.abs(s)/this.PIXEL_SIZE):Math.ceil(Math.abs(r)/this.PIXEL_SIZE);if(0!==a)for(var l=s/a,u=r/a,h=i.x,c=i.y,y=0;y<a;y++)new d.Pixel(h,c,this.PIXEL_SIZE,this.ctx,e),h+=l,c+=u;else new d.Pixel(i.x,i.y,this.PIXEL_SIZE,this.ctx,e)},r.prototype.drawPath=function(t,o){for(var e=0;e<t.length;e++)this.drawLine(t[e],t[e+1],o)},r.prototype.scanLineFill=function(t,o){for(var e=t.points,i=e.reduce(function(t,o){return t.y<o.y?t:o}).y,n=e.reduce(function(t,o){return t.y>o.y?t:o}).y,s=e[e.length-1],r=[],a=0;a<e.length;a++)r.push({0:s,1:e[a]}),s=e[a];for(var l=i;l<n;l+=this.PIXEL_SIZE){var u=[],h=void 0,c=void 0,y=void 0,d=void 0,x=void 0;for(a=0;a<r.length;a++)c=r[a][0].x,y=r[a][1].x,d=r[a][0].y,h=c+(y-c)/((x=r[a][1].y)-d)*(l-d),(d<=l&&l<x||x<=l&&l<d)&&u.push(h);u.sort();for(var p=0;p<u.length-1;p+=2){var f=u[p],g=u[p+1];this.drawLine({x:f,y:l},{x:g,y:l},o)}}},r.prototype.fillPolygon=function(t,o){var e=this;null!==this.fillMethod&&"scanLine"!==this.fillMethod||(3===t.points.length?[t]:t.decompose()).forEach(function(t){e.scanLineFill(t,o),e.drawPolygon(t,i.Colours.red)})},r.prototype.drawPolygon=function(t,o){var e=t.points;t.fillColour&&this.scanLineFill(t,t.fillColour);for(var i=o||t.colour,n=0;n<e.length-1;n++)this.drawLine(e[n],e[n+1],i);this.drawLine(e[e.length-1],e[0],i)},r.prototype.drawPolygonBuffer=function(t){var o=this;t.forEach(function(t){o.drawPolygon(t)})},r.prototype.drawTriangle=function(t,o){this.drawPolygon(new h.Polygon(t),o)},r.prototype.fillTriangle=function(t,o){this.fillPolygon(new h.Polygon(t),o)},r.prototype.drawRectangle=function(t,o,e,i,n){var s=[];s.push({x:t,y:o}),s.push({x:t+e,y:o}),s.push({x:t,y:o+i}),s.push({x:t+e,y:o+i}),this.drawPolygon(new h.Polygon(s),n)},r.prototype.fillRectangle=function(t,o,e,i,n){var s=[];s.push({x:t,y:o}),s.push({x:t+e,y:o}),s.push({x:t,y:o+i}),s.push({x:t+e,y:o+i}),this.fillPolygon(new h.Polygon(s),n)},r.prototype.drawCircle=function(t,o,e,i,n){for(var s=[],r=1/e,a=1;a<i;a++){var l=t+e*Math.cos(a*r),u=o+e*Math.sin(a*r);s.push({x:l,y:u}),s.push({x:l,y:-u}),s.push({x:u,y:-l}),s.push({x:-u,y:-l}),s.push({x:-l,y:-u}),s.push({x:-l,y:u}),s.push({y:-u,x:l}),s.push({x:u,y:l})}this.drawPolygon(new h.Polygon(s),n)},r.prototype.fillCircle=function(t,o,e,i,n){for(var s=[],r=1;r<i;r++){var a={x:e*Math.cos(2*Math.PI/r),y:e*Math.sin(2*Math.PI/r)};s.push(a)}this.drawPolygon(new h.Polygon(s),n)},r.prototype.clear=function(){this.ctx.clearRect(0,0,this.resolution.x,this.resolution.y)},r.prototype.clearSmart=function(t){var r=this;t.forEach(function(t){var o=t.boundingBox.points,e=o[0].x,i=o[0].y,n=o[1].x-e,s=o[2].y-i;r.ctx.clearRect(e-10*r.PIXEL_SIZE,i-10*r.PIXEL_SIZE,n+10*r.PIXEL_SIZE,s+10*r.PIXEL_SIZE)}),this.ctx.clearRect(0,0,200,200)},r.prototype.addTranslations=function(t){},r.prototype.popTranslation=function(t){void 0===t&&(t=1)},r);function r(t,o,e){this.transformationMatrices=[],this.ctx=t,this.PIXEL_SIZE=o,this.fillMethod=e;var i=t.canvas;this.resolution={x:i.width,y:i.height},this.translationMatrix=new n.Matrix([[0],[0]]),this.rotationMatrix=new n.Matrix([[1,0],[0,1]]),this.updateTransformationMatrix()}e.LGE=s},{"./Colour":2,"./Matrix":6,"./Pixel":7,"./Polygon":9}],6:[function(t,o,e){"use strict";e.__esModule=!0;var i=(n.prototype.add=function(t){if(this.width!==t.width&&this.height!==t.height)throw new Error("Dimension miss match");var o=new n(null);o.zero();for(var e=0;e<this.height;e++)for(var i=0;i<this.width;i++)o.values[e][i]=this.values[e][i]+t.values[e][i];return o},n.prototype.multiply=function(t){var o=[0,0,0];return o[0]=this.values[0][0]*t.values[0][0]+this.values[0][1]*t.values[1][0]+this.values[0][2]*t.values[2][0],o[1]=this.values[1][0]*t.values[0][0]+this.values[1][1]*t.values[1][0]+this.values[1][2]*t.values[2][0],o[2]=this.values[2][0]*t.values[0][0]+this.values[2][1]*t.values[1][0]+this.values[2][2]*t.values[2][0],new n([[o[0]],[o[1]],[o[2]]])},n.prototype.zero=function(){for(var t=0;t<this.height;t++)for(var o=0;o<this.width;o++)this.values[t][o]=0},n);function n(t){this.identityMatrix=[[1,0,0],[0,1,0],[0,0,1]],this.values=null===t?JSON.parse(JSON.stringify(this.identityMatrix)):t,this.width=this.values[0].length,this.height=this.values.length}e.Matrix=i},{}],7:[function(t,o,e){"use strict";e.__esModule=!0;function i(t,o,e,i,n){this.rec=new s.Rectangle(Math.ceil(t),Math.ceil(o),i,e,e,n),this.rec.draw()}var s=t("./Rectangle");e.Pixel=i},{"./Rectangle":10}],8:[function(t,o,e){"use strict";e.__esModule=!0;var i=t("./Colour"),n=t("./Polygon"),s=t("./Utils"),r=87,a=65,l=68,u=(h.prototype.updateBoundingBox=function(){var o=[];this.body.forEach(function(t){o.push.apply(o,t.points)}),this.boundingBox.points=s.Utils.calculateBoundingBox(o)},h.prototype.rotate=function(o){var e=this;this.angle+=o*Math.PI/180,this.angle>=2*Math.PI&&(this.angle-=2*Math.PI),this.angle<=-2*Math.PI&&(this.angle+=2*Math.PI),this.body.concat(this.flames).forEach(function(t){t.rotate(o,e.centrePoint)}),this.updateBoundingBox()},h.prototype.translate=function(o,e){this.body.concat(this.flames).forEach(function(t){t.translate(o,e)}),this.boundingBox.translate(o,e)},h.prototype.update=function(t,o){this.isBoosted=!1,t[r]&&(this.velocityVector.y+=this.thrustPower*Math.sin(this.angle)*o,this.velocityVector.x+=this.thrustPower*Math.cos(this.angle)*o,this.isBoosted=!0),t[a]&&this.rotate(-this.rotationSpeed*o),t[l]&&this.rotate(this.rotationSpeed*o),this.translate(this.velocityVector.x,this.velocityVector.y),this.centrePoint.x+=this.velocityVector.x,this.centrePoint.y+=this.velocityVector.y,1!==this.drag&&(this.velocityVector.x*=this.drag,this.velocityVector.y*=this.drag),(this.centrePoint.y<=50||this.centrePoint.y>=this.resolution.y-50)&&(this.velocityVector.y*=-.5),(this.centrePoint.x<=50||this.centrePoint.x>=this.resolution.x-50)&&(this.velocityVector.x*=-.5)},h.prototype.handleCollision=function(t){for(var o=this.boundingBox.points,e=o[2].x-o[0].x,i=o[3].y-o[0].y,n=0,s=0;s<t.length;s++){var r=t[s].boundingBox.points,a=r[2].x-o[0].x,l=r[3].y-o[0].y,u=t[s].centrePoint;u.x<0||u.x>this.resolution.x||u.y<0||u.y>this.resolution.y?(t.splice(s,1),n++,console.log("ran away")):o[0].x+e<r[0].x||r[0].x+a<o[0].x||o[0].y+i<r[0].y||r[0].y+l<o[0].y||(t.splice(s,1),n++,this.score++)}return n},h);function h(t){this.body=[],this.velocityVector={x:0,y:0},this.rotationSpeed=180,this.angle=0,this.score=0,this.thrustPower=10,this.drag=1,this.isBoosted=!1,this.resolution=t,this.body=[new n.Polygon([{x:-40,y:20},{x:40,y:20},{x:40,y:-20},{x:-40,y:-20}]),new n.Polygon([{x:40,y:20},{x:60,y:0},{x:40,y:-20}]),new n.Polygon([{x:-40,y:20},{x:-40,y:40},{x:-20,y:20}]),new n.Polygon([{x:-40,y:-20},{x:-40,y:-40},{x:-20,y:-20}]),new n.Polygon([{x:-20,y:10},{x:20,y:10},{x:20,y:-10},{x:-20,y:-10}])],this.boundingBox=new n.Polygon(this.body[0].points,!1),this.updateBoundingBox(),this.boundingBox.colour=i.Colours.green,this.body[0].colour=i.Colours.silver,this.body[0].fillColour=i.Colours.silver,this.body[1].colour=i.Colours.silver,this.body[1].fillColour=i.Colours.silver,this.body[2].colour=i.Colours.silver,this.body[2].fillColour=i.Colours.silver,this.body[3].colour=i.Colours.silver,this.body[3].fillColour=i.Colours.silver,this.body[4].colour=i.Colours.blue,this.body[4].fillColour=i.Colours.blue,this.flames=[new n.Polygon([{x:-40,y:20},{x:-60,y:10},{x:-40,y:0},{x:-60,y:-10},{x:-40,y:10},{x:-80,y:0},{x:-40,y:-10}])],this.flames.forEach(function(t){t.colour=i.Colours.orange,t.fillColour=i.Colours.orange}),this.translate(this.resolution.x/2,this.resolution.y/2),this.centrePoint=s.Utils.calculateCentrePoint(this.boundingBox.points)}e.Player=u},{"./Colour":2,"./Polygon":9,"./Utils":12}],9:[function(t,o,e){"use strict";e.__esModule=!0;var i=t("./Colour"),l=t("./Matrix"),a=t("./Utils"),n=(u.prototype.decompose=function(){if(3===this.points.length)return this.triangles.push(new u(this.points)),this.triangles;for(var t=this.points.slice(0,this.points.length);3<t.length;)for(var o=0;o<t.length;o++){for(var e=(o-1+t.length)%t.length,i=(o+1)%t.length,n=[t[o],t[e],t[i]],s=!0,r=0;r<t.length;r++)if(r!==o&&r!==i&&a.Utils.insideTriangle(t[r],new u(n))){s=!1;break}if(s){t.splice(o,1),this.triangles.push(new u(n));break}}return this.triangles.push(new u(t)),this.triangles},u.prototype.translate=function(t,o){var n=this;this.transformationMatrix.values[0][2]=t,this.transformationMatrix.values[1][2]=o,this.points.forEach(function(t,o){var e=new l.Matrix([[t.x],[t.y],[1]]),i=n.transformationMatrix.multiply(e);n.points[o]={x:i.values[0][0],y:i.values[1][0]}}),this.transformationMatrix.values[0][2]=0,this.transformationMatrix.values[1][2]=0,this.centrePoint.x+=t,this.centrePoint.y+=o,this.boundingBox&&this.boundingBox.translate(t,o)},u.prototype.moveTo=function(t,o){var e=this,i=[];this.points.forEach(function(t){i.push({x:e.centrePoint.x-t.x,y:e.centrePoint.y-t.y})}),this.centrePoint={x:t,y:o};for(var n=0;n<i.length;n++)this.points[n].x=this.centrePoint.x+i[n].x,this.points[n].y=this.centrePoint.y+i[n].y},u.prototype.rotate=function(t,o){var n=this,e=t*Math.PI/180,i=Math.cos(e),s=Math.sin(e);this.angle+=e;var r=this.transformationMatrix;r.values[0][0]=i,r.values[0][1]=-s,r.values[1][0]=s,r.values[1][1]=i;var a=o||this.centrePoint;r.values=[[i,-s,a.x-i*a.x- -s*a.y],[s,i,a.y-s*a.x-i*a.y],[0,0,1]],this.points.forEach(function(t,o){var e=new l.Matrix([[t.x],[t.y],[1]]),i=r.multiply(e);n.points[o]={x:i.values[0][0],y:i.values[1][0]}}),void 0!==this.boundingBox&&this.updateBoundingBox(),r.values[0][0]=1,r.values[0][1]=0,r.values[1][0]=0,r.values[1][1]=1,r.values[0][2]=0,r.values[1][2]=0},u.prototype.updateBoundingBox=function(){this.boundingBox.points=a.Utils.calculateBoundingBox(this.points)},u);function u(t,o){this.transformationMatrix=new l.Matrix(null),this.angle=0,this.fillColour=null,this.points=t,this.triangles=[],this.centrePoint=a.Utils.calculateCentrePoint(t),this.colour=i.Colours.black,o&&(this.boundingBox=new u(a.Utils.calculateBoundingBox(this.points)),this.boundingBox.colour=i.Colours.green),this.scale=1}e.Polygon=n},{"./Colour":2,"./Matrix":6,"./Utils":12}],10:[function(t,o,e){"use strict";e.__esModule=!0;var i=(n.prototype.draw=function(){this.ctx.fillStyle=this.fill,this.ctx.fillRect(this.x,this.y,this.width,this.height)},n);function n(t,o,e,i,n,s){this.x=t,this.y=o,this.width=i,this.height=n,this.ctx=e,this.fill=s.toString()}e.Rectangle=i},{}],11:[function(t,o,e){"use strict";e.__esModule=!0;var a=t("./Polygon"),l=t("./Utils"),i=(n.square=function(t,o,e,i,n){var s=[];return s.push({x:t,y:o}),s.push({x:t+e,y:o}),s.push({x:t+e,y:o+i}),s.push({x:t,y:o+i}),new a.Polygon(s,n)},n.polygon=function(t,o,e,i,n){for(var s=[],r=0;r<n;r++)s.push({x:t+l.Utils.randomInt(e),y:o+l.Utils.randomInt(i)});return new a.Polygon(s)},n);function n(){}e.ShapeFactory=i},{"./Polygon":9,"./Utils":12}],12:[function(t,o,e){"use strict";e.__esModule=!0;var i=(n.randomInt=function(t){return Math.floor(Math.random()*Math.floor(t))},n.sameSide=function(t,o,e,i){return 0<((t.x-e.x)*(i.y-e.y)-(i.x-e.x)*(t.y-e.y))*((o.x-e.x)*(i.y-e.y)-(i.x-e.x)*(o.y-e.y))},n.insideTriangle=function(t,o){var e=o.points,i=e[0],n=e[1],s=e[2];return this.sameSide(t,i,n,s)&&this.sameSide(t,n,i,s)&&this.sameSide(t,s,i,n)},n.calculateBoundingBox=function(t){for(var o=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,s=0,r=t;s<r.length;s++){var a=r[s];a.x<o&&(o=a.x),a.x>i&&(i=a.x),a.y<e&&(e=a.y),a.y>n&&(n=a.y)}return[{x:o,y:e},{x:i,y:e},{x:i,y:n},{x:o,y:n}]},n.calculateCentrePoint=function(t){var o=n.calculateBoundingBox(t);return{x:(o[2].x+o[0].x)/2,y:(o[3].y+o[0].y)/2}},n);function n(){}e.Utils=i},{}],13:[function(t,o,e){"use strict";e.__esModule=!0;var i=t("./Asteroid"),n=t("./Colour"),s=t("./LGE"),r=t("./Player"),a=t("./Utils"),l=function(){for(u.canvas=document.getElementById("canvas"),u.canvasCtx=u.canvas.getContext("2d"),u.canvas.width=u.config.resolution.x,u.canvas.height=u.config.resolution.y,window.addEventListener("keydown",u.input.onKeyDown,!1),window.addEventListener("keyup",u.input.onKeyUp,!1),u.graphicsEngine=new s.LGE(u.canvasCtx,u.config.pixelSize,"scanLine"),u.objects.player=new r.Player(u.config.resolution),u.state.numberAsteroids=0,u.objects.asteroids=[];u.state.numberAsteroids<u.config.maxNumberAsteroids;)u.objects.asteroids.push(i.asteroidFactory(u.config.resolution)),u.state.numberAsteroids++;document.getElementById("resolutionX").value=u.config.resolution.x.toString(),document.getElementById("resolutionY").value=u.config.resolution.y.toString(),document.getElementById("maxNumberAsteroids").value=u.config.maxNumberAsteroids.toString(),document.getElementById("pixelSize").value=u.config.pixelSize.toString()},u={canvas:null,canvasCtx:null,config:{asteroidSpawnProbability:1,maxNumberAsteroids:10,pixelSize:4,resolution:{x:1280,y:720},showBoundingBoxes:!1,showFps:!0},draw:function(){u.graphicsEngine.clear();var o=u.objects.player.body.concat(u.objects.asteroids);u.objects.player.isBoosted?(u.sounds.thrust.play(),o.push.apply(o,u.objects.player.flames)):u.sounds.thrust.paused||(u.sounds.thrust.pause(),u.sounds.thrust.currentTime=0),u.config.showBoundingBoxes&&(o.push(u.objects.player.boundingBox),u.objects.asteroids.forEach(function(t){o.push(t.boundingBox)})),u.graphicsEngine.drawPolygonBuffer(o),u.canvasCtx.fillStyle=n.Colours.white.toString(),u.canvasCtx.font="30px Arial",u.canvasCtx.fillText("Score: "+u.objects.player.score,10,50),u.config.showFps&&u.canvasCtx.fillText("FPS: "+Math.floor(1/u.state.frameTimeDelta),10,100)},filters:{list:["","blur(2px)","hue-rotate(90deg)","grayscale(100%)","invert(100%)","saturate(200%)"],selectedFilter:0,switchFilter:function(){u.canvas.style.filter=u.filters.list[u.filters.selectedFilter],u.filters.selectedFilter=(u.filters.selectedFilter+1)%u.filters.list.length}},graphicsEngine:null,input:{onKeyDown:function(t){u.input.pressedKeys[t.keyCode]=!0},onKeyUp:function(t){u.input.pressedKeys[t.keyCode]=!1},pressedKeys:{}},objects:{asteroids:[],player:null},setup:l,sounds:{explosion:"./sounds/explosion.mp3",thrust:new Audio("./sounds/rocket.mp3")},state:{frameTimeDelta:0,lastFrameTime:0,numberAsteroids:0},update:function(){u.objects.player.update(u.input.pressedKeys,u.state.frameTimeDelta);var e=[];u.objects.asteroids.forEach(function(t,o){e.push.apply(e,t.handleCollision(u.objects.asteroids,o))}),(e=e.filter(function(t,o,e){return e.indexOf(t)===o})).forEach(function(t){u.objects.asteroids[t].bounce()}),u.objects.asteroids.forEach(function(t,o){t.update(u.state.frameTimeDelta)});var t=u.state.numberAsteroids;u.state.numberAsteroids-=u.objects.player.handleCollision(u.objects.asteroids),t!==u.state.numberAsteroids&&new Audio(u.sounds.explosion).play(),u.state.numberAsteroids<u.config.maxNumberAsteroids&&a.Utils.randomInt(10)<=u.config.asteroidSpawnProbability&&(u.objects.asteroids.push(i.asteroidFactory(u.config.resolution)),1<u.objects.asteroids[u.state.numberAsteroids].handleCollision(u.objects.asteroids,u.state.numberAsteroids).length?(console.log(u.objects.asteroids[u.state.numberAsteroids].handleCollision(u.objects.asteroids,u.state.numberAsteroids)),console.log("Asteroid spawn collision"),u.objects.asteroids.pop()):u.state.numberAsteroids++)}},h=function(t){u.state.frameTimeDelta=(t-u.state.lastFrameTime)/1e3,u.state.lastFrameTime=t,u.update(),u.draw(),requestAnimationFrame(h)};document.getElementById("canvas").addEventListener("click",u.filters.switchFilter,!1),document.getElementById("toggleBoundingBox").addEventListener("click",function(t){u.config.showBoundingBoxes=!u.config.showBoundingBoxes},!1),document.getElementById("toggleFpsDisplay").addEventListener("click",function(t){u.config.showFps=!u.config.showFps},!1),document.getElementById("updateResolution").addEventListener("click",function(t){var o=parseInt(document.getElementById("resolutionX").value,10),e=parseInt(document.getElementById("resolutionY").value,10);u.config.resolution={x:o,y:e},l()},!1),document.getElementById("updateMaxAsteroids").addEventListener("click",function(t){for(u.config.maxNumberAsteroids=parseInt(document.getElementById("maxNumberAsteroids").value,10);u.state.numberAsteroids>u.config.maxNumberAsteroids;)u.objects.asteroids.pop(),u.state.numberAsteroids--},!1),document.getElementById("updatePixelSize").addEventListener("click",function(t){var o=parseInt(document.getElementById("pixelSize").value,10);u.config.pixelSize=o,l()},!1),u.setup(),requestAnimationFrame(h)},{"./Asteroid":1,"./Colour":2,"./LGE":5,"./Player":8,"./Utils":12}]},{},[1,2,3,4,5,13,6,7,8,9,10,11,12]);